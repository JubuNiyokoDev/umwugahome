{
  "entities": {
    "Artisan": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Artisan",
      "type": "object",
      "description": "Represents an artisan profile on the UmwugaHome platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Artisan entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 Artisan).  Links the artisan profile to a user account."
        },
        "photo": {
          "type": "string",
          "description": "URL to the artisan's profile picture."
        },
        "bio": {
          "type": "string",
          "description": "Biography or description of the artisan."
        },
        "profession": {
          "type": "string",
          "description": "The artisan's primary trade or profession."
        },
        "location": {
          "type": "string",
          "description": "Geographic location of the artisan."
        },
        "shopName": {
          "type": "string",
          "description": "Name of the artisan's shop or business."
        },
        "productIds": {
          "type": "array",
          "description": "References to Products. (Relationship: Artisan 1:N Product)",
          "items": {
            "type": "string"
          }
        },
        "orderIds": {
          "type": "array",
          "description": "References to Orders. (Relationship: Artisan 1:N Order)",
          "items": {
            "type": "string"
          }
        },
        "centerId": {
          "type": "string",
          "description": "Reference to TrainingCenter. (Relationship: TrainingCenter 1:N Artisan)"
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to Mentor. (Relationship: Mentor 1:N Artisan)"
        }
      },
      "required": [
        "id",
        "userId",
        "profession",
        "location"
      ]
    },
    "TrainingCenter": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "TrainingCenter",
      "type": "object",
      "description": "Represents a training center profile on the UmwugaHome platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the TrainingCenter entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 TrainingCenter). Links the training center profile to a user account."
        },
        "logo": {
          "type": "string",
          "description": "URL to the training center's logo."
        },
        "name": {
          "type": "string",
          "description": "Name of the training center."
        },
        "description": {
          "type": "string",
          "description": "Description of the training center and its programs."
        },
        "programIds": {
          "type": "array",
          "description": "References to Programs. (Relationship: TrainingCenter 1:N Program)",
          "items": {
            "type": "string"
          }
        },
        "artisanIds": {
          "type": "array",
          "description": "References to Artisans. (Relationship: TrainingCenter 1:N Artisan). Artisans who have graduated or are affiliated with the training center.",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "userId",
        "name",
        "description"
      ]
    },
    "Youth": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Youth",
      "type": "object",
      "description": "Represents a youth or student profile on the UmwugaHome platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Youth entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 Youth). Links the youth profile to a user account."
        },
        "photo": {
          "type": "string",
          "description": "URL to the youth's profile picture."
        },
        "interests": {
          "type": "string",
          "description": "The youth's interests and career aspirations."
        },
        "mentorId": {
          "type": "string",
          "description": "Reference to Mentor. (Relationship: Mentor 1:N Youth)"
        }
      },
      "required": [
        "id",
        "userId"
      ]
    },
    "Mentor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Mentor",
      "type": "object",
      "description": "Represents a mentor profile on the UmwugaHome platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Mentor entity."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:1 Mentor). Links the mentor profile to a user account."
        },
        "photo": {
          "type": "string",
          "description": "URL to the mentor's profile picture."
        },
        "bio": {
          "type": "string",
          "description": "Biography or description of the mentor."
        },
        "expertise": {
          "type": "string",
          "description": "Area of expertise of the mentor."
        },
        "youthIds": {
          "type": "array",
          "description": "References to Youths. (Relationship: Mentor 1:N Youth)",
          "items": {
            "type": "string"
          }
        },
        "centerId": {
          "type": "string",
          "description": "Reference to TrainingCenter. (Relationship: TrainingCenter 1:N Mentor)"
        },
        "artisanIds": {
          "type": "array",
          "description": "References to Artisans. (Relationship: Mentor 1:N Artisan)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "userId",
        "expertise"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user account on the UmwugaHome platform. Does NOT store authentication data (passwords, etc.)",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "role": {
          "type": "string",
          "description": "Role of the user (e.g., artisan, training_center, youth, mentor, admin)."
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "role"
      ]
    },
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product sold by an artisan on the UmwugaHome platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Product entity."
        },
        "artisanId": {
          "type": "string",
          "description": "Reference to Artisan. (Relationship: Artisan 1:N Product)"
        },
        "name": {
          "type": "string",
          "description": "Name of the product."
        },
        "description": {
          "type": "string",
          "description": "Description of the product."
        },
        "price": {
          "type": "number",
          "description": "Price of the product."
        },
        "imageURL": {
          "type": "string",
          "description": "URL of the product image."
        }
      },
      "required": [
        "id",
        "artisanId",
        "name",
        "description",
        "price"
      ]
    },
    "Order": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Order",
      "type": "object",
      "description": "Represents an order placed for a product on the UmwugaHome platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Order entity."
        },
        "artisanId": {
          "type": "string",
          "description": "Reference to Artisan. (Relationship: Artisan 1:N Order)"
        },
        "productId": {
          "type": "string",
          "description": "Reference to Product. (Relationship: Order 1:1 Product)"
        },
        "customerId": {
          "type": "string",
          "description": "Reference to User. (Relationship: User 1:N Order).  The ID of the customer who placed the order. Assuming users can place orders."
        },
        "orderDate": {
          "type": "string",
          "description": "Date the order was placed.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "Status of the order (e.g., pending, shipped, delivered)."
        }
      },
      "required": [
        "id",
        "artisanId",
        "productId",
        "customerId",
        "orderDate",
        "status"
      ]
    },
    "Program": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Program",
      "type": "object",
      "description": "Represents a training program offered by a training center.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Program entity."
        },
        "centerId": {
          "type": "string",
          "description": "Reference to TrainingCenter. (Relationship: TrainingCenter 1:N Program)"
        },
        "name": {
          "type": "string",
          "description": "Name of the training program."
        },
        "description": {
          "type": "string",
          "description": "Description of the training program."
        },
        "duration": {
          "type": "string",
          "description": "Duration of the training program."
        }
      },
      "required": [
        "id",
        "centerId",
        "name",
        "description",
        "duration"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user account information. This collection uses the user's UID as the document ID, providing path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/artisan",
        "definition": {
          "entityName": "Artisan",
          "schema": {
            "$ref": "#/backend/entities/Artisan"
          },
          "description": "Stores artisan profile information. This is a subcollection of the user, providing path-based ownership. Contains artisan profile data directly linked to the user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/training_center",
        "definition": {
          "entityName": "TrainingCenter",
          "schema": {
            "$ref": "#/backend/entities/TrainingCenter"
          },
          "description": "Stores training center profile information. This is a subcollection of the user, providing path-based ownership. Contains training center profile data directly linked to the user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/youth",
        "definition": {
          "entityName": "Youth",
          "schema": {
            "$ref": "#/backend/entities/Youth"
          },
          "description": "Stores youth profile information. This is a subcollection of the user, providing path-based ownership. Contains youth profile data directly linked to the user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/mentor",
        "definition": {
          "entityName": "Mentor",
          "schema": {
            "$ref": "#/backend/entities/Mentor"
          },
          "description": "Stores mentor profile information. This is a subcollection of the user, providing path-based ownership. Contains mentor profile data directly linked to the user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/artisan/products/{productId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product information for a specific artisan.  The artisan's userId is the parent.  This structure facilitates listing products owned by a specific artisan.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            },
            {
              "name": "productId",
              "description": "The unique identifier of the product."
            }
          ]
        }
      },
      {
        "path": "/orders/{orderId}",
        "definition": {
          "entityName": "Order",
          "schema": {
            "$ref": "#/backend/entities/Order"
          },
          "description": "Stores order information. Contains artisanId and customerId for querying and reporting.",
          "params": [
            {
              "name": "orderId",
              "description": "The unique identifier of the order."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/training_center/programs/{programId}",
        "definition": {
          "entityName": "Program",
          "schema": {
            "$ref": "#/backend/entities/Program"
          },
          "description": "Stores program information for a specific training center. The training center's userId is the parent. This structure facilitates listing programs offered by a specific training center.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user, matching the Firebase Auth UID."
            },
            {
              "name": "programId",
              "description": "The unique identifier of the training program."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the UmwugaHome platform, focusing on artisans, training centers, youths, mentors, products, orders, and programs. It prioritizes authorization independence by denormalizing data where necessary and uses structural segregation to ensure consistent security postures within collections.\n\n*   **Authorization Independence:** The structure avoids `get()` calls in security rules by denormalizing authorization data.  For example, if product access depended on artisan data, the artisan's relevant attributes would be copied into the product document.\n*   **Structural Segregation:** Each collection houses documents with similar access requirements. Public profiles are separated from private user data.\n*   **QAPs (Rules are Not Filters):** The structure enables secure list operations by avoiding the need to filter data based on access rights within the rules themselves. This is achieved through path-based ownership and membership maps.  For instance, products are stored under the artisan's profile (`/users/{userId}/artisan/products/{productId}`), enabling efficient listing based on ownership.\n*   **Access Modeling:**\n    *   **User Profiles:** User-related data (artisan, training center, youth, mentor profiles) is stored under `/users/{userId}`, providing path-based ownership.\n    *   **Products:** Products are stored as a subcollection of the artisan profile. This establishes a clear ownership relationship and simplifies security rules.\n    *   **Orders:** Orders are stored at the top level to facilitate global queries and reporting. Order documents contain the artisanId and customerId for filtering by artisan or customer.\n    *   **Training Programs:** Programs are stored as a subcollection of the training center, ensuring a clear hierarchy."
  }
}